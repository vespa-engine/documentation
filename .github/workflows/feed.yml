name: Vespa Documentation Search Feed

on:
  push:
    branches:
      - main
      - update-vespa-documentation-search-feed-workflow # Temporary branch for testing

jobs:
  build:
    uses: vespa-engine/gh-actions/.github/workflows/jekyll-feed-to-vespa.yml@fix-jekyll-build
    with:
      hook-post-build-script: |
        echo "Find all JSON files"
        find . -type f -name '*.json'
        echo "\n"
        echo "Find the open_index.json file"
        find . -type f -name '*open_index*'

        ls -l /github/workspace/_site/json_indexes/open_index.json
