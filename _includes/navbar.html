<!-- Copyright Vespa.ai. All rights reserved.. -->
 
<!-- Navbar -->
<nav class="nav sticky-top {{include.class}}">
    <div id="mobileNav">
        <span class="nav-item hide-small-desktop-up" onclick="toggleMenu()">
            <i class="d-icon d-menu-hamburger"></i>
        </span>
        <a href="https://docs.vespa.ai/">
            <img class="nav-brand" src="{{ site.baseurl }}/assets/logos/{{include.logo}}" alt="Vespa logo"/>
        </a>
        <div  id="navMenu" class="nav-responsive">
            <div class="section-searchbar" style="margin: 0 5%">
                <form action="https://search.vespa.ai/search.html" method="GET" id="search-form">
                    <div class="input-group has-button">
                        <div class="input" style="width: 100%">
                            <input type="text" class="section-searchbar" placeholder="Search" id="searchinput" name="query" />
                        </div>
                        <button type="submit" id="submit" class="button is-solid has-icon p-0 section-searchbar"><i class="d-icon d-search"></i></button>
                    </div>
                </form>
            </div>
            <div class="nav-center">
                <div class="mobile-toc">
                    {% if site.data.sidebar.docs[0] %}
                        {% for section in site.data.sidebar.docs %}
                            <h4>
                                <div class="nav-item">
                                    {% if section.documents[0] %} <img class="toggle-arrow" src="{{ site.baseurl }}/assets/icons/arrow-down.svg"  alt="▼"/> {% endif %}
                                    <a href="{{ section.url }}"> {{ section.title }}</a>
                                </div>
                            </h4>
                            {% if section.documents[0] %}
                                <ul>
                                {% for entry in section.documents %}
                                <h5>
                                    <div class="nav-item">
                                        {% if entry.sub %}  <img class="toggle-arrow" src="{{ site.baseurl }}/assets/icons/arrow-down.svg" alt="▼"/> {% endif %}
                                        <a href="{{ entry.url }}">{{ entry.page }}</a>
                                    </div>
                                 </h5>
                                
                                    {% if entry.sub %}
                                        <ul>
                                        {% for item in entry.sub  %}
                                           <h6>
                                                <div class="nav-item">
                                                    <a href="{{ item.url }}">{{ item.page }}</a>
                                                </div>
                                            </h6>
                                        {% endfor %}
                                        </ul>
                                    {% endif %}
                                {% endfor %}
                                </ul>
                            {% endif %}
                        {% endfor %}
                    {% endif %}
                    </div>
                <a class="nav-item" href="https://slack.vespa.ai/">Slack</a>
                <a class="nav-item" href="https://blog.vespa.ai/">Blog</a>
                <a class="nav-item" href="https://twitter.com/vespaengine" data-proofer-ignore>Twitter</a>
                <a class="nav-item" href="https://github.com/vespa-engine">GitHub</a>
                <a class="nav-item" href="https://github.com/vespa-engine/vespa/issues">Issues</a>
                
            </div>
        </div>


    </div>
    <div id="desktopNav">
        <div class="nav-left">
            <span class="nav-item hide-small-desktop-up" onclick="toggleMenu()"><i class="d-icon d-menu-hamburger"></i></span>
            <a href="https://docs.vespa.ai/">
                <img class="nav-brand" src="{{ site.baseurl }}/assets/logos/{{include.logo}}" alt="Vespa logo"/></a>
        </div>

        <div  id="navMenu" class="nav-responsive">
            <div class="nav-center">
                <a class="nav-item" href="https://slack.vespa.ai/">Slack</a>
                <a class="nav-item" href="https://blog.vespa.ai/">Blog</a>
                <a class="nav-item" href="https://twitter.com/vespaengine" data-proofer-ignore>Twitter</a>
                <a class="nav-item" href="https://github.com/vespa-engine">GitHub</a>
                <a class="nav-item" href="https://github.com/vespa-engine/vespa/issues">Issues</a>
                <a class="nav-item" href="/sitemap.html">TOC</a>
            </div>

            <div class="nav-right nav-item section-searchbar">
                <form action="https://search.vespa.ai/search.html" method="GET" id="search-form">
                    <div class="input-group has-button">
                        <div class="input">
                            <input type="text" class="section-searchbar" placeholder="Search" id="searchinput" name="query" />
                        </div>
                        <button type="submit" id="submit" class="button is-solid has-icon p-0 section-searchbar"><i class="d-icon d-search"></i></button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</nav>

<script type="module" src="/js/search_suggestions.js"></script>
<script>

document.addEventListener("DOMContentLoaded", function () {
    const arrowDown = "{{ site.baseurl }}/assets/icons/arrow-down.svg";
    const arrowUp = "{{ site.baseurl }}/assets/icons/arrow-up.svg";

    function toggleArrowClickHandler(arrow) {
        arrow.addEventListener("click", function (e) {
            e.stopPropagation();
            const ul = arrow.closest(".nav-item").parentElement.nextElementSibling;
            if (ul && ul.tagName.toLowerCase() === 'ul') {
                const isHidden = ul.style.display === "none" || ul.style.display === "";
                ul.style.display = isHidden ? "block" : "none";
                arrow.src = isHidden ? arrowUp : arrowDown;
                arrow.alt = isHidden ? "▲" : "▼";
            }
        });
    }

    document.querySelectorAll(".mobile-toc .toggle-arrow").forEach(toggleArrowClickHandler);

    // Optional: collapse all <ul> by default
    document.querySelectorAll(".mobile-toc ul").forEach(function (ul) {
        ul.style.display = "none";
    });

    // Optional: set all arrows to ▼ image initially
    document.querySelectorAll(".mobile-toc .toggle-arrow").forEach(function (arrow) {
        arrow.src = arrowDown;
        arrow.alt = "▼";
    });
});

function toggleNav() {
    let screenSize = window.innerWidth; 
    if (screenSize > 988) {
        document.getElementById('desktopNav').style.display = 'block';
        document.getElementById('mobileNav').style.display = 'none';
    } else {
        document.getElementById('mobileNav').style.display = 'block';
        document.getElementById('desktopNav').style.display = 'none';
    }
}

toggleNav();

window.addEventListener('resize', toggleNav);
</script>
