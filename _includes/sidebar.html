<!-- Copyright Vespa.ai. All rights reserved. -->
<style>
  details > summary {
    display: list-item; /* block to remove the arrow thingy */
    cursor: pointer;
  }
  ul {
    list-style-type: none;
  }
</style>


<div id="sidebar" class="is-vertical">
  <ul>
    {%- for item in site.data.sidebar.docs -%}
    <li>
      <details data-id="{{ item.url }}">
        <summary>{{ item.title }}</summary>
        {% if item.documents %}
        <ul>
          {% for child in item.documents %}
            <li>
              {% if child.sub %}
                <!-- submenu start-->
                <details data-id="{{ child.url }}">
                  <summary><a href="{{child.url}}" {% if page.url == child.url %}style="font-weight:bold"{% endif %}>{{child.page}}</a></summary>
                  <ul>
                    {% for subchild in child.sub %}
                      <li>
                        <a href="{{subchild.url}}" {% if page.url == subchild.url %}style="font-weight:bold"{% endif %}>{{subchild.page}}</a>
                      </li>
                    {% endfor %}
                  </ul>
                </details>
                <!-- submenu end-->
              {% else %}
                <a href="{{child.url}}" {% if page.url == child.url %}style="font-weight:bold"{% endif %}>{{child.page}}</a>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
        {% endif %}
      </details>
    </li>
    {% endfor %}
  </ul>
</div>
  
<script type="application/javascript">
    const saved = new Set(JSON.parse(localStorage.getItem('expanded') || '[]'));

    document.querySelectorAll('details[data-id]').forEach(d => {
        if (saved.has(d.dataset.id)) d.open = true;
        d.addEventListener('toggle', () => {
            if (d.open) saved.add(d.dataset.id); else saved.delete(d.dataset.id);
            localStorage.setItem('expanded', JSON.stringify([...saved]));
        });
    });
</script>
  