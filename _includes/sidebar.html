<!-- Copyright Vespa.ai. All rights reserved. -->
<style>
  details > summary {
    display: list-item;
    cursor: pointer;
  }
  ul.top {
    padding-top: 12px;
  }
  ul.top, ul.child {
    list-style-type: none;
  }
  ul.top {
    padding-left: 17px;
  }
  ul.child {
    padding-top: 2px;
    padding-left: 27px;
  }
  li.top {
    padding-top: 5px;
    padding-bottom: 2px;
  }
</style>

<div id="sidebar" class="is-vertical">
  <ul class="top">
    {%- for item in site.data.sidebar.docs -%}
    <li class="top">
      <details data-id="{{ item.title }}">
        <summary>{{ item.title }}</summary>
        {% if item.documents %}
        <ul class="child">
          {% for child in item.documents %}
            <li>
              {% if child.sub %}
                <!-- submenu start-->
                <details data-id="{{ item.title }}.{{ child.title }}">
                  <summary>{{child.title}}</summary>
                  <ul class="child">
                    {% for subchild in child.sub %}
                      <li>
                        {% if subchild.sub %}
                        <!-- sub-submenu start-->
                        <details data-id="{{ item.title }}.{{ child.title }}.{{ subchild.title }}">
                          <summary>{{subchild.title}}</summary>
                          <ul class="child">
                            {% for subsubchild in subchild.sub %}
                            <li>
                              <a href="{{subsubchild.url}}" {% if page.url == subsubchild.url %}style="font-weight:bold"{% endif %}>{{subsubchild.page}}</a>
                            </li>
                            {% endfor %}
                          </ul>
                        </details>
                        <!-- sub-submenu end-->
                        {% else %}
                          <a href="{{subchild.url}}" {% if page.url == subchild.url %}style="font-weight:bold"{% endif %}>{{subchild.page}}</a>
                        {% endif %}
                      </li>
                    {% endfor %}
                  </ul>
                </details>
                <!-- submenu end-->
              {% else %}
                <a href="{{child.url}}" {% if page.url == child.url %}style="font-weight:bold"{% endif %}>{{child.page}}</a>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
        {% endif %}
      </details>
    </li>
    {% endfor %}
  </ul>
</div>
  
<script type="application/javascript">
    const saved = new Set(JSON.parse(localStorage.getItem('expanded') || '[]'));

    document.querySelectorAll('details[data-id]').forEach(d => {
        if (saved.has(d.dataset.id)) d.open = true;
        d.addEventListener('toggle', () => {
            if (d.open) saved.add(d.dataset.id); else saved.delete(d.dataset.id);
            localStorage.setItem('expanded', JSON.stringify([...saved]));
        });
    });
</script>
  