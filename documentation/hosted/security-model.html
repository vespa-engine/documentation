---
# Copyright 2019 Oath Inc. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root.
title: "Security model"
---

<p>This document explains the security model of the hosted Vespa service.</p>

<h2 id="control-plane">Control plane</h2>

<p>The following explains how access to management features are limited.</p>

<h3 id="access-to-the-vespa-console">Access to the Vespa console</h3>

<p>Console access is available to authenticated users only.
Access is granted based on role membership as defined in <a href="#roles">roles</a>.</p>

<h3 id="application-deployment">Application deployment</h3>

<p>Deploying applications can be done by any user member of a role with deploy privileges (see <a href="#roles">roles</a>).
Additionally every application can have deploy keys which can be used by the maven deploy plugin or command line tool.</p>

<h2 id="roles">Roles</h2>

<p>
<table class="table">
    <tr><td>tenant owner</td><td>Inherits tenant admin, and can additionally delete tenant</td></tr>
    <tr><td>tenant admin</td><td>Inherits tenant operator and application admin. Can also manage tenant metadata and delete applications</td></tr>
    <tr><td>tenant operator</td><td>Can create applications and see tenant information.</td></tr>
    <tr><td>application admin</td><td>Inherits application operator and application developer. Can also update/delete application and submit new application packages.</td></tr>
    <tr><td>application operator</td><td>Inherits application reader. Can also perform application operation tasks (e.g. restart nodes)</td></tr>
    <tr><td>application developer</td><td>Inherits application reader. Can also deploy applications to development zones.</td></tr>
    <tr><td>application reader</td><td>Can see information about an application.</td></tr>
</table>
</p>

<h2 id="application-access-control">Application access control</h2>

<p>All application endpoints are secured with mutual TLS.</p>

<h3 id="server-certificate">Server certificate</h3>

<p>On first time deployment a server certificate identifying the application will be provisioned.
This certificate will be automatically set up on all application endpoints.
The certificate is signed by DigiCert or Globalsign.</p>

<h3 id="client-certificate">Client certificate</h3>

<p>To enable TLS client side authentication:</p>

<ol>
    <li>Add trusted certificates (or issuer certificates) to the file <em>[application-package]/security/clients.pem</em>.
    <li>Add a tag to the container element(s) in services.xml: <pre>&lt;client-authorize/&gt;</pre>.
</ol>

<p>With this, only clients presenting a valid certificate will be able to access the application endpoints.</p>

<p class="alert-warning">
Note: in order to test application deployments, another trusted client certificate is added by hosted Vespa test/staging zones.
This will not affect production deployments.
</p>

<h3 id="internal-node-to-node-communication">Internal node to node communication</h3>

<p>All internal communication between nodes in an application is secured with several layers:</p>

<ul>
    <li>Network ACLs (iptables) allowing only local communication within the application.</li>
    <li>Mutual TLS with authorization only allowing nodes from the same application.</li>    
</ul>
